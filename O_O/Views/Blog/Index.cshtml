@model IEnumerable<O_O.Models.post>

@{
    ViewBag.Title = "Blog";
    int page = ViewBag.pageNum;
    int numPosts = ViewBag.numPosts;
    int pageSize = ViewBag.pageSize;
}
@section head {
<link rel="Stylesheet" href="../../Content/sh_the.min.css" />
<link rel="Stylesheet" href="../../Content/blog.css" />
<script type="text/javascript" src="../../Scripts/sh_main.min.js"></script>

<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
}
<section id="right-sidebar">
<ul id="icons">
    <li>
        <a href="http://@Request.Url.Host/Blog/RSS" class="clickit">
            <img alt="rss" title="View My Rss Feed URL" src="@Url.Content("~/Content/Images/rss.gif")" />
            <span>RSS</span>
        </a>
        <div class="rss dropdown">
            Copy the URL below into your RSS reader <br />
            <input value="http://@Request.Url.Host/Blog/RSS" />
        </div>
    </li>
    <li>
        <a href="http://stackoverflow.com/users/719312/thomas-shields" class="clickit Stack">
            <img src="@Url.Content("~/Content/Images/so.png")" alt="Stack Overflow Logo" title="View My Stack Overflow Activity" />
            <span>Stack Overflow</span>
        </a>
        <div class="dropdown">
            <div id="SOActivity"></div>
            <a href="http://stackoverflow.com/users/719312/thomas-shields">
                <img class="so-flair" src="http://stackoverflow.com/users/flair/719312.png?theme=clean" width="208" height="58" alt="profile for Thomas Shields at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for Thomas Shields at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
            </a>
        </div>
    </li>
    <li>
        <a href="https://github.com/thomas4g">
            <img src="@Url.Content("~/Content/Images/github.png")" alt="Github Logo" title="View My Projects on Github" />
            <span>Github</span>            
        </a>
        <div class="dropdown">
        </div>
    </li>

</ul>
</section>

<section id="posts">
@foreach (var item in Model)
{
        @Html.Partial("Post", item);
}
</section>

@if(page > 1) {
@(Html.ActionLink("« Previous", "Index", new { page = page - 1 }, new { @class = "previous" }))
}
@if (page * pageSize < numPosts)
{ 
@Html.ActionLink("Next »", "Index", new { page = page + 1 }, new { @class = "next" })
}
<script type="text/javascript">
    function toggleDropDown(clicked, $dropdown) {
        $dropdown.toggle();
        if (clicked.title.indexOf("Hide") !== -1) {
            clicked.title = clicked.title.replace("Hide", "View")
            $dropdown.parents("li").css("z-index", "1")

        }
        else {
            clicked.title = clicked.title.replace("View", "Hide");
            $("#icons li").css("z-index", "1");
            $dropdown.parents("li").css("z-index", "2")
        }
        $("#icons div.dropdown").not($dropdown).hide();
        
    }
//    $(".dropdown").blur(function () {
//        toggleDropDown($(this).prev()[0], $(this));
//    });
    $(".dropdown").click(function (e) {
        e.stopPropagation();
    });
        $(document).click(function () {
            $("div.dropdown").hide();

        });
        $(".clickit").click(function () {
            if ($(window).width() > 480) {
                var dropdown = $(this).next("div.dropdown");
                toggleDropDown(this, dropdown);
                return false;
            }
        });
    $(".Stack").click(function () {
        var el = document.getElementById("SOActivity");
        if (el.innerHTML === "") {
            $.get("../Blog/Stackoverflow", function (data) {
                el.innerHTML = data;
            });
        }
    });
    window.onload = function () {
        sh_highlightDocument('../../Scripts/', '.min.js');
    }
</script>
