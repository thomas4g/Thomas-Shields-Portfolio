<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#color {
	width:400px;
	height:100px;
}
</style>
<script type="text/javascript">
function $(id) { //this is just a shorthand function; the $ is easier to type than document.getElementById
	return document.getElementById(id); //this gets an element (like <div>) from the page based on it's id
}
//make our variables global for use by the update function
var red;
var green;
var blue;
var op;
var result;
var hex;
var rgb;
function update() { 
	var nc = "rgba(" + red.value + "," + green.value + "," + blue.value + "," + op.value / 100 + ")";
	result.style.backgroundColor = nc;
	rgb.value = nc;
	hex.value = "#" + toHex(red.value) + toHex(green.value) + toHex(blue.value);
};
window.onload = function() { //the page has to load before we try to get the elements, so fire an event on the "onload" event...
	//grab the elements and stick 'em in those global variables
	red = $("red"); 
	green = $("green");
	blue = $("blue");
	op = $("opacity");
	result = $("color");
	hex = $("hex");
	rgb = $("rgb");
	//wire up the onchange events of the sliders to the update function. We don't include the () on the end, because we're not calling the update function, just setting it as the object of the onchange event
	red.onchange = update;
	green.onchange = update;
	blue.onchange = update;
	op.onchange = update;
	//wire up events for when the hex and rgb fields are changed
	hex.onblur = function() {
		var bare = this.value; //set bare to the content of the hex field
		//set the sliders's values to the decimal version of the corresponding hex numbers
		red.value = fromHex(bare.substring(1, 3)); 
		green.value = fromHex(bare.substring(3, 5));
		blue.value = fromHex(bare.substring(5, 7));
		update(); //now that the sliders are changed, call update.
	};
	rgb.onblur = function() {
		var colors = this.value.replace("rgba(", "").replace(")", "").split(","); //strip out the "rgba" and the parentheses from the rgb field, then split the numbers up into an array by comma (that's what the .split(",") does)
		//set the sliders's values to the corresponding numbers in the array
		red.value = colors[0];
		green.value = colors[1];
		blue.value = colors[2];
		op.value = colors[3]*100; //make sure to multiply by 100 since we divide by 100 in the update function! 
		update(); //call update!
	}
	//now that we've set up all the variables and events, call update for the first time. (remember, we're still on the onload event for the page)
	update();
}
//given a decimal number "dec", convert it to hex.
function toHex(dec) {
	//A string of the hex characters for easy access: 
	var hexchars = "0123456789ABCDEF";
	//Divide the decimal number by 16. Round it down. Now we have an integer. Use that integer to pull the character from that location in the array
	//For example, let's say you have the decimal number 10. In Hex, that's A. 10/16 = .625. Rounded down, that's 0. That means to pull the 0th (first)
	//element from the hexchars array (which is 0)
	//That's the first part (before the plus sign)
	//Then, divide the decimal by 16 again, round it down, multiply it by 16, and subtract it from the decimal.
	//Still working with 10 here:
	//10/16 = .625; rounded down gives 0. Multiplied by 16 equals 0. 10 - 0 = 10.  The 10th (9th) char in the hexchars array is A. 
	//Final result? 0A, which is A.
	
	var hex = hexchars[Math.floor(dec / 16)] + hexchars[Math.floor(dec - Math.floor(dec / 16) * 16)];
	return hex;
}
function fromHex(hex) {
	var hexchars = "0123456789ABCDEF";
	var decml = 16 * hexchars.indexOf(hex.charAt(0)) + hexchars.indexOf(hex.charAt(1));
	return decml;
}
</script>
</head>
<body>
	<div>
		<label for=red>Red: </label>
		<input type=range value=0 max=255 id=red>
	</div>
	<div>
		<label for=green>Green: </label>
		<input max=255 type=range value=0 id=green>
	</div>
	<div>
		<label for=blue>Blue: </label>
		<input max=255 type=range value=0 id=blue>
	</div>
	<div>
		<label for=opacity>Opacity: </label>
		<input type=range value=100 id=opacity></div>
	<div id="color">
	</div>
	<div>
		<label for=hex>Hex: </label>
		<input id=hex>
	</div>
	<div>
		<label for=rgb>RGB: </label>
		<input id=rgb>
	</div>
</body>
</html>